name: ğŸ§  AI Validation â€“ Hunor

on:
  pull_request:
    branches: [ main ]

jobs:
  validate-ai-content:
    runs-on: ubuntu-latest

    steps:
    - name: ğŸ“¥ KÃ³dbÃ¡zis letÃ¶ltÃ©se
      uses: actions/checkout@v3

    - name: ğŸ” ValidÃ¡ciÃ³ â€“ `#generated-by:` megjelÃ¶lÃ©s ellenÅ‘rzÃ©se
      run: |
        echo "ğŸ” EllenÅ‘rzÃ©s: AI-forrÃ¡s megjelÃ¶lÃ©s keresÃ©se..."
        CHANGED_FILES=$(git diff --name-only ${{ github.event.pull_request.base.sha }} ${{ github.sha }})
        echo "ğŸ“„ MÃ³dosÃ­tott fÃ¡jlok:"
        echo "$CHANGED_FILES"
        
        FAIL=0

        for FILE in $CHANGED_FILES; do
          if [[ "$FILE" == *.md ]]; then
            if ! grep -q "#generated-by:" "$FILE"; then
              echo "âŒ Hiba: $FILE nem tartalmaz '#generated-by:' megjelÃ¶lÃ©st!"
              FAIL=1
            fi
          fi
        done

        if [ $FAIL -eq 1 ]; then
          echo "âŒ Ã‰rvÃ©nytelen PR â€“ hiÃ¡nyzÃ³ AI-megjelÃ¶lÃ©s."
          exit 1
        fi

        echo "âœ… Minden fÃ¡jl megfelelÅ‘ megjelÃ¶lÃ©ssel rendelkezik."
